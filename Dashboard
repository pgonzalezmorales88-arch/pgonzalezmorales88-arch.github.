<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Dashboard — TERRAMOVA Ventas 2024</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
  :root {
    --azul-marino: #0A1D3F;
    --azul-ceruleo: #2A6EBB;
    --azul-claro: #4A8BDD;
    --azul-turquesa: #38B6FF;
    --dorado: #D4AF37;
    --dorado-claro: #F0D87E;
    --blanco: #FFFFFF;
    --blanco-hueso: #F8F9FA;
    --gris-fondo: #0F172A;
    --verde-terramova: #2E8B57;
  }

  body {
    font-family: 'Montserrat', 'Poppins', sans-serif;
    margin: 0;
    background: var(--gris-fondo);
    color: var(--blanco-hueso);
    background-image: 
      radial-gradient(circle at 10% 20%, rgba(42, 110, 187, 0.08) 0%, transparent 20%),
      radial-gradient(circle at 90% 80%, rgba(212, 175, 55, 0.05) 0%, transparent 20%);
    min-height: 100vh;
  }

  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
  }

  /* Header con logo TERRAMOVA */
  .header-terramova {
    background: linear-gradient(135deg, var(--azul-marino) 0%, var(--verde-terramova) 100%);
    padding: 25px 40px;
    border-radius: 20px;
    margin-bottom: 40px;
    box-shadow: 0 10px 30px rgba(10, 29, 63, 0.4);
    position: relative;
    overflow: hidden;
    border-left: 8px solid var(--dorado);
  }

  .header-terramova::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, 
      var(--dorado) 0%, 
      var(--azul-turquesa) 50%, 
      var(--verde-terramova) 100%);
  }

  .logo-container {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 20px;
  }

  .logo-icon {
    font-size: 42px;
    color: var(--dorado);
    background: rgba(255, 255, 255, 0.1);
    width: 80px;
    height: 80px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 3px solid var(--dorado-claro);
  }

  .logo-text h1 {
    font-size: 42px;
    margin: 0;
    font-weight: 700;
    color: var(--blanco);
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
    letter-spacing: 1px;
  }

  .logo-text .tagline {
    color: var(--dorado-claro);
    font-size: 18px;
    font-style: italic;
    margin-top: 5px;
    font-weight: 300;
  }

  .quote {
    font-size: 16px;
    color: var(--blanco);
    text-align: center;
    font-style: italic;
    padding: 15px;
    background: rgba(0, 0, 0, 0.2);
    border-radius: 10px;
    border-left: 4px solid var(--dorado);
    max-width: 800px;
    margin: 0 auto;
  }

  /* Stats Grid */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 25px;
    margin-bottom: 40px;
  }

  .stat-card {
    background: linear-gradient(135deg, var(--azul-marino) 0%, var(--azul-ceruleo) 100%);
    padding: 25px;
    border-radius: 15px;
    color: var(--blanco);
    box-shadow: 0 8px 20px rgba(10, 29, 63, 0.3);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 1px solid rgba(212, 175, 55, 0.2);
    position: relative;
    overflow: hidden;
  }

  .stat-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 30px rgba(10, 29, 63, 0.4);
  }

  .stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 6px;
    height: 100%;
    background: linear-gradient(to bottom, var(--dorado), var(--azul-turquesa));
  }

  .stat-icon {
    font-size: 32px;
    color: var(--dorado);
    margin-bottom: 15px;
  }

  .stat-number {
    font-size: 40px;
    font-weight: 700;
    color: var(--dorado-claro);
    margin: 10px 0;
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
  }

  .stat-label {
    font-size: 15px;
    color: var(--blanco);
    opacity: 0.9;
    font-weight: 500;
  }

  /* Filtros */
  .filter-section {
    background: rgba(10, 29, 63, 0.7);
    padding: 25px;
    border-radius: 15px;
    margin-bottom: 30px;
    backdrop-filter: blur(10px);
    border: 1px solid rgba(212, 175, 55, 0.2);
  }

  .filter-row {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    align-items: center;
    justify-content: center;
  }

  .filter-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .filter-label {
    color: var(--dorado-claro);
    font-weight: 600;
    font-size: 16px;
  }

  select, input {
    padding: 12px 18px;
    border-radius: 10px;
    border: 2px solid var(--azul-claro);
    background: var(--azul-marino);
    color: var(--blanco);
    font-size: 15px;
    font-weight: 500;
    cursor: pointer;
    min-width: 200px;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(42, 110, 187, 0.2);
  }

  select:hover, input:hover {
    border-color: var(--dorado);
    box-shadow: 0 4px 18px rgba(212, 175, 55, 0.3);
  }

  /* Charts Grid */
  .charts-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
    gap: 30px;
    margin-bottom: 40px;
  }

  @media (max-width: 1100px) {
    .charts-grid {
      grid-template-columns: 1fr;
    }
  }

  .chart-card {
    background: linear-gradient(145deg, rgba(10, 29, 63, 0.9), rgba(42, 110, 187, 0.1));
    padding: 25px;
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(10, 29, 63, 0.3);
    border: 1px solid rgba(212, 175, 55, 0.1);
    transition: transform 0.3s ease;
  }

  .chart-card:hover {
    transform: translateY(-5px);
  }

  .chart-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 25px;
  }

  .chart-title {
    color: var(--dorado);
    font-size: 22px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .chart-title i {
    color: var(--azul-turquesa);
  }

  /* Productos Table */
  .products-section {
    background: linear-gradient(145deg, rgba(10, 29, 63, 0.9), rgba(42, 110, 187, 0.1));
    padding: 30px;
    border-radius: 20px;
    box-shadow: 0 8px 32px rgba(10, 29, 63, 0.3);
    margin-bottom: 40px;
    border: 1px solid rgba(212, 175, 55, 0.1);
  }

  .section-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 25px;
  }

  .section-header h2 {
    color: var(--dorado);
    font-size: 26px;
    margin: 0;
    font-weight: 700;
  }

  .section-header i {
    font-size: 28px;
    color: var(--azul-turquesa);
  }

  .products-table-container {
    overflow-x: auto;
    border-radius: 12px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    min-width: 800px;
  }

  th {
    background: linear-gradient(135deg, var(--azul-marino), var(--azul-ceruleo));
    color: var(--blanco);
    font-weight: 600;
    padding: 18px 20px;
    text-align: left;
    border-bottom: 3px solid var(--dorado);
    font-size: 15px;
    letter-spacing: 0.5px;
  }

  td {
    padding: 18px 20px;
    background: rgba(10, 29, 63, 0.5);
    border-bottom: 1px solid rgba(212, 175, 55, 0.1);
    font-size: 15px;
  }

  tr:hover td {
    background: rgba(42, 110, 187, 0.2);
  }

  .category-badge {
    display: inline-block;
    padding: 6px 12px;
    border-radius: 20px;
    font-size: 13px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .badge-accesorios {
    background: rgba(56, 182, 255, 0.2);
    color: var(--azul-turquesa);
    border: 1px solid var(--azul-turquesa);
  }

  .badge-ropa {
    background: rgba(212, 175, 55, 0.2);
    color: var(--dorado-claro);
    border: 1px solid var(--dorado);
  }

  .badge-maletas {
    background: rgba(46, 139, 87, 0.2);
    color: var(--verde-terramova);
    border: 1px solid var(--verde-terramova);
  }

  .price-original {
    text-decoration: line-through;
    color: rgba(255, 255, 255, 0.5);
    font-size: 14px;
  }

  .price-current {
    color: var(--dorado-claro);
    font-weight: 700;
    font-size: 18px;
  }

  .discount-badge {
    background: linear-gradient(135deg, #FF6B6B, #FF8E53);
    color: white;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 12px;
    font-weight: 700;
    margin-left: 8px;
  }

  /* Footer */
  .footer {
    text-align: center;
    padding: 25px;
    color: var(--blanco);
    opacity: 0.8;
    font-size: 14px;
    border-top: 1px solid rgba(212, 175, 55, 0.2);
    margin-top: 40px;
  }

  .terramova-badge {
    color: var(--dorado);
    font-weight: 700;
    font-size: 16px;
  }

  /* Canvas sizes */
  canvas {
    max-height: 400px;
  }
</style>
</head>

<body>
<div class="container">
  <!-- Header TERRAMOVA -->
  <div class="header-terramova">
    <div class="logo-container">
      <div class="logo-icon">
        <i class="fas fa-globe-americas"></i>
      </div>
      <div class="logo-text">
        <h1>TERRAMOVA</h1>
        <div class="tagline">Explora lo extraordinario</div>
      </div>
    </div>
    
    <div class="quote">
      <i class="fas fa-quote-left" style="color: var(--dorado); margin-right: 10px;"></i>
      "Viajar es seguir la ruta de lo que te hace feliz."
      <i class="fas fa-quote-right" style="color: var(--dorado); margin-left: 10px;"></i>
      <div style="margin-top: 10px; font-weight: 600; color: var(--dorado-claro);">- TERRAMOVA</div>
    </div>
  </div>

  <!-- Stats Grid -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-shopping-bag"></i>
      </div>
      <div class="stat-number" id="totalProductsCount">12</div>
      <div class="stat-label">Productos en Catálogo</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-tags"></i>
      </div>
      <div class="stat-number" id="totalCategoriesCount">4</div>
      <div class="stat-label">Categorías</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-chart-line"></i>
      </div>
      <div class="stat-number" id="avgDiscount">32%</div>
      <div class="stat-label">Descuento Promedio</div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">
        <i class="fas fa-dollar-sign"></i>
      </div>
      <div class="stat-number" id="totalRevenue">$3,430</div>
      <div class="stat-label">Ingreso Potencial</div>
    </div>
  </div>

  <!-- Filtros -->
  <div class="filter-section">
    <div class="filter-row">
      <div class="filter-group">
        <div class="filter-label">
          <i class="fas fa-filter"></i> Filtrar por Categoría
        </div>
        <select id="categoryFilter" onchange="filterProducts()">
          <option value="all">Todas las categorías</option>
          <option value="accesorios">Accesorios</option>
          <option value="ropa">Ropa</option>
          <option value="maletas">Maletas</option>
          <option value="bolsita">Bolsita</option>
        </select>
      </div>
      
      <div class="filter-group">
        <div class="filter-label">
          <i class="fas fa-sort-amount-down"></i> Ordenar por
        </div>
        <select id="sortFilter" onchange="filterProducts()">
          <option value="name">Nombre (A-Z)</option>
          <option value="price-asc">Precio (Menor a Mayor)</option>
          <option value="price-desc">Precio (Mayor a Menor)</option>
          <option value="discount">Mayor Descuento</option>
        </select>
      </div>
      
      <div class="filter-group">
        <div class="filter-label">
          <i class="fas fa-search"></i> Buscar Producto
        </div>
        <input type="text" id="searchFilter" placeholder="Nombre del producto..." onkeyup="filterProducts()">
      </div>
    </div>
  </div>

  <!-- Gráficos -->
  <div class="charts-grid">
    <div class="chart-card">
      <div class="chart-header">
        <div class="chart-title">
          <i class="fas fa-chart-pie"></i> Ventas por Categoría
        </div>
        <div style="color: var(--azul-turquesa); font-weight: 600;">
          <i class="fas fa-info-circle"></i> Distribución
        </div>
      </div>
      <canvas id="pieChart"></canvas>
    </div>
    
    <div class="chart-card">
      <div class="chart-header">
        <div class="chart-title">
          <i class="fas fa-chart-bar"></i> Precios Originales vs Descuentos
        </div>
        <div style="color: var(--dorado); font-weight: 600;">
          <i class="fas fa-percentage"></i> Comparación
        </div>
      </div>
      <canvas id="barChart"></canvas>
    </div>
  </div>

  <!-- Tabla de Productos -->
  <div class="products-section">
    <div class="section-header">
      <i class="fas fa-box-open"></i>
      <h2>Catálogo de Productos TERRAMOVA</h2>
    </div>
    
    <div class="products-table-container">
      <table>
        <thead>
          <tr>
            <th>Producto</th>
            <th>Categoría</th>
            <th>Precio Original</th>
            <th>Precio Actual</th>
            <th>Descuento</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="productsTableBody">
          <!-- Los productos se cargarán aquí con JavaScript -->
        </tbody>
      </table>
    </div>
  </div>

  <!-- Footer -->
  <div class="footer">
    <p>Dashboard de Ventas 2024 | <span class="terramova-badge">TERRAMOVA</span> - Viajes 100% seguros • Asistencia personalizada • Experiencias auténticas</p>
    <p style="margin-top: 10px; font-size: 13px;">
      <i class="fas fa-shield-alt" style="color: var(--azul-turquesa);"></i> Precios transparentes • 
      <i class="fas fa-headset" style="color: var(--dorado);"></i> Asistencia 24/7 • 
      <i class="fas fa-heart" style="color: #FF6B6B;"></i> Experiencias memorables
    </p>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Datos de productos TERRAMOVA
const products = [
  {
    name: "Bolsa",
    category: "accesorios",
    originalPrice: 220,
    currentPrice: 150,
    description: "Bolsa de viaje práctica y elegante"
  },
  {
    name: "Bolsa de Accesorios",
    category: "accesorios",
    originalPrice: 320,
    currentPrice: 250,
    description: "Organizador de accesorios para viaje"
  },
  {
    name: "Botella de agua de acero inoxidable",
    category: "accesorios",
    originalPrice: 200,
    currentPrice: 180,
    description: "Tapa estándar, ideal para viajes"
  },
  {
    name: "Cobertura de Pasaporte",
    category: "accesorios",
    originalPrice: 200,
    currentPrice: 150,
    description: "Protector de pasaporte con diseño premium"
  },
  {
    name: "Gorra",
    category: "ropa",
    originalPrice: 250,
    currentPrice: 200,
    description: "Gorra con logo TERRAMOVA"
  },
  {
    name: "Llavero",
    category: "accesorios",
    originalPrice: 100,
    currentPrice: 70,
    description: "Llavero metálico con diseño de viaje"
  },
  {
    name: "Maleta",
    category: "maletas",
    originalPrice: 1199,
    currentPrice: 1100,
    description: "Maleta de viaje resistente y espaciosa"
  },
  {
    name: "Porta Pasaporte",
    category: "bolsita",
    originalPrice: 250,
    currentPrice: 200,
    description: "Porta pasaporte de cuero con múltiples compartimentos"
  },
  {
    name: "Sabana",
    category: "accesorios",
    originalPrice: 300,
    currentPrice: 250,
    description: "Sábana de viaje compacta y cómoda"
  },
  {
    name: "Sudadera Unisex Unitalla",
    category: "ropa",
    originalPrice: 400,
    currentPrice: 350,
    description: "Sudadera cómoda para viajes"
  },
  {
    name: "Tarjetero de piel Saffiano",
    category: "accesorios",
    originalPrice: 200,
    currentPrice: 150,
    description: "Tarjetero de piel de alta calidad"
  },
  {
    name: "Taza de viaje de acero inoxidable",
    category: "accesorios",
    originalPrice: 250,
    currentPrice: 180,
    description: "Taza con asa, mantiene la temperatura"
  }
];

// Variables para gráficos
let pieChart, barChart;

// Inicializar dashboard
document.addEventListener('DOMContentLoaded', function() {
  updateStats();
  renderProductsTable();
  createCharts();
  filterProducts();
});

// Actualizar estadísticas
function updateStats() {
  const categories = [...new Set(products.map(p => p.category))];
  const totalRevenue = products.reduce((sum, p) => sum + p.currentPrice, 0);
  const totalDiscount = products.reduce((sum, p) => {
    const discount = ((p.originalPrice - p.currentPrice) / p.originalPrice) * 100;
    return sum + discount;
  }, 0);
  const avgDiscount = Math.round(totalDiscount / products.length);
  
  document.getElementById('totalProductsCount').textContent = products.length;
  document.getElementById('totalCategoriesCount').textContent = categories.length;
  document.getElementById('avgDiscount').textContent = `${avgDiscount}%`;
  document.getElementById('totalRevenue').textContent = `$${totalRevenue.toLocaleString()}`;
}

// Renderizar tabla de productos
function renderProductsTable(filteredProducts = products) {
  const tableBody = document.getElementById('productsTableBody');
  
  tableBody.innerHTML = filteredProducts.map(product => {
    const discount = Math.round(((product.originalPrice - product.currentPrice) / product.originalPrice) * 100);
    const discountBadge = discount > 0 ? `<span class="discount-badge">-${discount}%</span>` : '';
    
    // Determinar clase de categoría
    let categoryClass = '';
    if (product.category === 'accesorios') categoryClass = 'badge-accesorios';
    else if (product.category === 'ropa') categoryClass = 'badge-ropa';
    else if (product.category === 'maletas') categoryClass = 'badge-maletas';
    else categoryClass = 'badge-accesorios';
    
    return `
      <tr>
        <td style="font-weight: 600;">
          <div style="display: flex; align-items: center; gap: 10px;">
            <div style="width: 40px; height: 40px; background: linear-gradient(135deg, var(--azul-ceruleo), var(--azul-turquesa)); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white;">
              <i class="fas fa-box"></i>
            </div>
            <div>
              <div>${product.name}</div>
              <div style="font-size: 13px; color: rgba(255,255,255,0.7); margin-top: 3px;">${product.description}</div>
            </div>
          </div>
        </td>
        <td>
          <span class="category-badge ${categoryClass}">
            ${product.category.charAt(0).toUpperCase() + product.category.slice(1)}
          </span>
        </td>
        <td>
          <span class="price-original">$${product.originalPrice.toLocaleString()}</span>
        </td>
        <td>
          <span class="price-current">$${product.currentPrice.toLocaleString()}</span>
          ${discountBadge}
        </td>
        <td>
          <div style="color: ${discount >= 30 ? '#FF6B6B' : discount >= 20 ? '#FFA726' : '#4CAF50'}; font-weight: 700;">
            ${discount}%
          </div>
        </td>
        <td>
          <button style="background: linear-gradient(135deg, var(--azul-turquesa), var(--azul-ceruleo)); color: white; border: none; padding: 8px 16px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 14px;">
            <i class="fas fa-cart-plus"></i> Agregar
          </button>
        </td>
      </tr>
    `;
  }).join('');
}

// Filtrar productos
function filterProducts() {
  const categoryFilter = document.getElementById('categoryFilter').value;
  const sortFilter = document.getElementById('sortFilter').value;
  const searchFilter = document.getElementById('searchFilter').value.toLowerCase();
  
  let filtered = products;
  
  // Filtrar por categoría
  if (categoryFilter !== 'all') {
    filtered = filtered.filter(p => p.category === categoryFilter);
  }
  
  // Filtrar por búsqueda
  if (searchFilter) {
    filtered = filtered.filter(p => 
      p.name.toLowerCase().includes(searchFilter) || 
      p.description.toLowerCase().includes(searchFilter)
    );
  }
  
  // Ordenar
  filtered.sort((a, b) => {
    switch(sortFilter) {
      case 'name':
        return a.name.localeCompare(b.name);
      case 'price-asc':
        return a.currentPrice - b.currentPrice;
      case 'price-desc':
        return b.currentPrice - a.currentPrice;
      case 'discount':
        const discountA = ((a.originalPrice - a.currentPrice) / a.originalPrice) * 100;
        const discountB = ((b.originalPrice - b.currentPrice) / b.originalPrice) * 100;
        return discountB - discountA;
      default:
        return 0;
    }
  });
  
  renderProductsTable(filtered);
  updateCharts(filtered);
}

// Crear gráficos
function createCharts() {
  const ctxPie = document.getElementById('pieChart').getContext('2d');
  const ctxBar = document.getElementById('barChart').getContext('2d');
  
  // Colores para las categorías
  const categoryColors = {
    'accesorios': '#38B6FF',
    'ropa': '#D4AF37',
    'maletas': '#2E8B57',
    'bolsita': '#9C27B0'
  };
  
  // Gráfico de pastel
  pieChart = new Chart(ctxPie, {
    type: 'pie',
    data: {
      labels: [],
      datasets: [{
        data: [],
        backgroundColor: [],
        borderColor: 'rgba(255, 255, 255, 0.2)',
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: 'right',
          labels: {
            color: '#F8F9FA',
            font: {
              size: 14,
              family: 'Montserrat'
            },
            padding: 20
          }
        },
        tooltip: {
          callbacks: {
            label: function(context) {
              const label = context.label || '';
              const value = context.raw || 0;
              const total = context.dataset.data.reduce((a, b) => a + b, 0);
              const percentage = Math.round((value / total) * 100);
              return `${label}: ${value} productos (${percentage}%)`;
            }
          }
        }
      }
    }
  });
  
  // Gráfico de barras
  barChart = new Chart(ctxBar, {
    type: 'bar',
    data: {
      labels: [],
      datasets: [
        {
          label: 'Precio Original',
          data: [],
          backgroundColor: 'rgba(56, 182, 255, 0.7)',
          borderColor: '#38B6FF',
          borderWidth: 2
        },
        {
          label: 'Precio con Descuento',
          data: [],
          backgroundColor: 'rgba(212, 175, 55, 0.7)',
          borderColor: '#D4AF37',
          borderWidth: 2
        }
      ]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          labels: {
            color: '#F8F9FA',
            font: {
              size: 14
            }
          }
        }
      },
      scales: {
        x: {
          grid: {
            color: 'rgba(212, 175, 55, 0.1)'
          },
          ticks: {
            color: '#F8F9FA',
            font: {
              size: 13
            }
          }
        },
        y: {
          beginAtZero: true,
          grid: {
            color: 'rgba(212, 175, 55, 0.1)'
          },
          ticks: {
            color: '#F8F9FA',
            callback: function(value) {
              return '$' + value;
            }
          }
        }
      }
    }
  });
  
  updateCharts(products);
}

// Actualizar gráficos con datos filtrados
function updateCharts(filteredProducts) {
  // Actualizar gráfico de pastel (por categoría)
  const categoryCounts = {};
  filteredProducts.forEach(p => {
    categoryCounts[p.category] = (categoryCounts[p.category] || 0) + 1;
  });
  
  const categoryColors = {
    'accesorios': '#38B6FF',
    'ropa': '#D4AF37',
    'maletas': '#2E8B57',
    'bolsita': '#9C27B0'
  };
  
  pieChart.data.labels = Object.keys(categoryCounts).map(cat => 
    cat.charAt(0).toUpperCase() + cat.slice(1)
  );
  pieChart.data.datasets[0].data = Object.values(categoryCounts);
  pieChart.data.datasets[0].backgroundColor = Object.keys(categoryCounts).map(cat => 
    categoryColors[cat] || '#38B6FF'
  );
  pieChart.update();
  
  // Actualizar gráfico de barras (top 6 productos)
  const sortedProducts = [...filteredProducts]
    .sort((a, b) => b.currentPrice - a.currentPrice)
    .slice(0, 6);
  
  barChart.data.labels = sortedProducts.map(p => p.name.length > 15 ? p.name.substring(0, 15) + '...' : p.name);
  barChart.data.datasets[0].data = sortedProducts.map(p => p.originalPrice);
  barChart.data.datasets[1].data = sortedProducts.map(p => p.currentPrice);
  barChart.update();
}
</script>
</body>
</html>
